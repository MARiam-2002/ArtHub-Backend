# ุฏููู ุงููุงุด ููุตูุญุฉ ุงูุฑุฆูุณูุฉ (Home Page Caching Guide)

## ููุฎุต ุงูุชุญุณููุงุช ุงููุถุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุงุด ุฐูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุชุญุณูู ุงูุฃุฏุงุก ูุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ.

## ุงุณุชุฑุงุชูุฌูุฉ ุงููุงุด

### ูุฏุฉ ุงูุชุฎุฒูู (TTL)
- **ุงูุถููู (Guest Users)**: 30 ุฏูููุฉ - ูุฃู ุงูุจูุงูุงุช ุฃูู ุชุฎุตุตุงู
- **ุงููุณุชุฎุฏููู ุงููุณุฌููู**: 5 ุฏูุงุฆู - ูุฃู ุงูุจูุงูุงุช ุฃูุซุฑ ุชุฎุตุตุงู ูุชุญุชุงุฌ ุชุญุฏูุซ ุฃุณุฑุน

### ููุงุชูุญ ุงููุงุด
- ุงูุถููู: `home:data:guest`
- ุงููุณุชุฎุฏููู: `home:data:user:{userId}`

## ููููุฉ ุงุณุชุฎุฏุงู Cache Invalidation

### 1. ุนูุฏ ุฅุถุงูุฉ ุฃู ุชุญุฏูุซ ุงูุฃุนูุงู ุงููููุฉ
```javascript
import { clearHomeCache } from '../home/home.controller.js';

// ุจุนุฏ ุฅุถุงูุฉ ุฃู ุชุญุฏูุซ ุนูู ููู
await artworkModel.create(newArtwork);
await clearHomeCache(); // ุฅูุบุงุก ูุงุด ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
```

### 2. ุนูุฏ ุฅุถุงูุฉ ุฃู ุชุญุฏูุซ ุงูููุงููู
```javascript
import { clearHomeCache } from '../home/home.controller.js';

// ุจุนุฏ ุชุญุฏูุซ ุจูุงูุงุช ููุงู
await userModel.findByIdAndUpdate(artistId, updateData);
await clearHomeCache(); // ุฅูุบุงุก ูุงุด ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
```

### 3. ุนูุฏ ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุดุฎุตูุฉ
```javascript
import { clearUserHomeCache } from '../home/home.controller.js';

// ุจุนุฏ ุฅุถุงูุฉ ุนูู ููููุถูุฉ
await userModel.findByIdAndUpdate(userId, { $push: { wishlist: artworkId } });
await clearUserHomeCache(userId); // ุฅูุบุงุก ูุงุด ุงููุณุชุฎุฏู ููุท
```

### 4. ุนูุฏ ุฅุถุงูุฉ ุฃู ุชุญุฏูุซ ุงูุชุตูููุงุช
```javascript
import { clearHomeCache } from '../home/home.controller.js';

// ุจุนุฏ ุฅุถุงูุฉ ุชุตููู ุฌุฏูุฏ
await categoryModel.create(newCategory);
await clearHomeCache(); // ุฅูุบุงุก ูุงุด ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
```

## ุงูููุงุฆุฏ ุงููุญููุฉ

โ **ุณุฑุนุฉ ุฃูุถู**: ุชุญููู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูู ุงููุงุด ุจุฏูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช  
โ **ุฃุฏุงุก ูุญุณู**: ุชูููู ุงูุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช  
โ **ุงุณุชุฌุงุจุฉ ุฃุณุฑุน**: ููุช ุงุณุชุฌุงุจุฉ ุฃูู ูููุณุชุฎุฏููู  
โ **ูุงุด ุฐูู**: ูุงุด ูููุตู ููุถููู ูุงููุณุชุฎุฏููู ุงููุณุฌููู  
โ **ุชุญุฏูุซ ุชููุงุฆู**: ุฅูุบุงุก ุงููุงุด ุนูุฏ ุชุบููุฑ ุงูุจูุงูุงุช  

## ููุงุญุธุงุช ูููุฉ

- ุดูู ุงูู response ูุจูู ููุง ูู ุชูุงูุงูุ ูุชูุงูู ูุน Flutter
- ุงููุงุด ูุนูู ุชููุงุฆูุงูุ ูุง ุญุงุฌุฉ ูุชุบููุฑ ููุฏ Flutter
- ูููู ูุฑุงูุจุฉ ุญุงูุฉ ุงููุงุด ูู ุฎูุงู `meta.cached: true` ูู ุงูุงุณุชุฌุงุจุฉ
- ูู ุญุงูุฉ ูุดู ุงููุงุดุ ูุชู ุงูุฑุฌูุน ููุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู

## ูุฑุงูุจุฉ ุงูุฃุฏุงุก

ูููู ูุฑุงูุจุฉ ุฃุฏุงุก ุงููุงุด ูู ุฎูุงู:
```javascript
import { getCacheStats } from '../utils/cache.js';

const stats = await getCacheStats();
console.log('๐ Cache statistics:', stats);
```

## ุงุฎุชุจุงุฑ ุงููุงุด

ูููู ุงุฎุชุจุงุฑ ุงููุงุด ุจุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช ุงููุฑูู:
```bash
node scripts/test-home-cache.js
```

ูุฐุง ุงูุณูุฑูุจุช ุณูููู ุจู:
- ุงุฎุชุจุงุฑ ุงูุทูุจ ุงูุฃูู (ุจุฏูู ูุงุด)
- ุงุฎุชุจุงุฑ ุงูุทูุจ ุงูุซุงูู (ูุน ูุงุด)
- ุญุณุงุจ ุชุญุณู ุงูุณุฑุนุฉ
- ูุญุต ุงูุชูุงูู ูุน Flutter
- ุงุฎุชุจุงุฑ ุงูุงุณุชูุฑุงุฑ