# Special Request Delete - ุญุฐู ุงูุทูุจุงุช ุงูุฎุงุตุฉ

## ๐ฏ **ุงููุธููุฉ:**
ุญุฐู ุทูุจ ุฎุงุต ููุงุฆูุงู ูู ุงููุธุงู ูุน ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุงูุญุงูุฉ.

## ๐ **ุงูููุฒุงุช:**

### โ **ุงูุตูุงุญูุงุช:**
- **ุตุงุญุจ ุงูุทูุจ:** ููููู ุญุฐู ุงูุทูุจุงุช ุงููุฑููุถุฉ ุฃู ุงูููุบุงุฉ ุฃู ุงูุญุฐู ุงูุฅุฌุจุงุฑู
- **ุงูููุงู:** ููููู ุญุฐู ุงูุทูุจุงุช ุงููุฑููุถุฉ ุฃู ุงูููุบุงุฉ ููุท

### โ **ุงูุญุงูุงุช ุงููุณููุญุฉ ููุญุฐู:**
- `pending` - ูุนูู
- `rejected` - ูุฑููุถ  
- `cancelled` - ููุบู
- `forceDelete` - ุญุฐู ุฅุฌุจุงุฑู (ูุตุงุญุจ ุงูุทูุจ ููุท)

### โ **ุงูุชุญููุงุช:**
- โ ุงูุชุญูู ูู ุตุญุฉ ูุนุฑู ุงูุทูุจ
- โ ุงูุชุญูู ูู ูุฌูุฏ ุงูุทูุจ
- โ ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
- โ ุงูุชุญูู ูู ุญุงูุฉ ุงูุทูุจ
- โ ุฅุฑุณุงู ุฅุดุนุงุฑ ููุทุฑู ุงูุขุฎุฑ

## ๐ง **API Endpoint:**

### **DELETE** `/api/special-requests/{requestId}`

#### **Headers:**
```
Authorization: Bearer {token}
Content-Type: application/json
```

#### **Parameters:**
- `requestId` (path): ูุนุฑู ุงูุทูุจ (MongoDB ObjectId)

#### **Request Body (ุงุฎุชูุงุฑู):**
```json
{
  "reason": "ุณุจุจ ุงูุญุฐู (ุงุฎุชูุงุฑู)",
  "forceDelete": false
}
```

#### **Response (200):**
```json
{
  "success": true,
  "message": "ุชู ุญุฐู ุงูุทูุจ ุจูุฌุงุญ",
  "data": {
    "deletedRequestId": "64f1a2b3c4d5e6f7g8h9i0j1",
    "deletedRequestInfo": {
      "requestId": "64f1a2b3c4d5e6f7g8h9i0j1",
      "title": "ููุญุฉ ูููุฉ ุฒูุฑูุฉ ุฒุฑูุงุก",
      "status": "rejected",
      "deletedBy": "64f1a2b3c4d5e6f7g8h9i0j2",
      "deletedAt": "2024-01-24T11:23:45.678Z",
      "reason": "ุชู ุฅูุบุงุก ุงูุทูุจ ูุนุฏู ุงูุญุงุฌุฉ"
    },
    "deletedBy": "owner"
  },
  "meta": {
    "timestamp": "2024-01-24T11:23:45.678Z",
    "userId": "64f1a2b3c4d5e6f7g8h9i0j2",
    "forceDelete": false
  }
}
```

#### **Error Responses:**

**400 - ูุง ูููู ุญุฐู ุงูุทูุจ:**
```json
{
  "success": false,
  "message": "ูุง ูููู ุญุฐู ุงูุทูุจ ูู ุญุงูุชู ุงูุญุงููุฉ. ูููู ุญุฐู ุงูุทูุจุงุช ุงููุฑููุถุฉ ุฃู ุงูููุบุงุฉ ููุท.",
  "data": {
    "currentStatus": "accepted",
    "allowedStatuses": ["pending", "rejected", "cancelled"]
  }
}
```

**403 - ุบูุฑ ูุตุฑุญ:**
```json
{
  "success": false,
  "message": "ุบูุฑ ูุตุฑุญ ูู ุจุญุฐู ูุฐุง ุงูุทูุจ",
  "data": null
}
```

**404 - ุงูุทูุจ ุบูุฑ ููุฌูุฏ:**
```json
{
  "success": false,
  "message": "ุงูุทูุจ ุบูุฑ ููุฌูุฏ",
  "data": null
}
```

## ๐ก๏ธ **ุงูุฃูุงู:**

### **ุงูุชุญููุงุช:**
- โ ุงูุชุญูู ูู ุตุญุฉ ูุนุฑู ุงูุทูุจ (MongoDB ObjectId)
- โ ุงูุชุญูู ูู ูุฌูุฏ ุงูุทูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูู ุตุงุญุจ ุงูุทูุจ ุฃู ุงูููุงู
- โ ุงูุชุญูู ูู ุญุงูุฉ ุงูุทูุจ ูุจู ุงูุญุฐู
- โ ููุน ุงูุญุฐู ุงูุฅุฌุจุงุฑู ููููุงู

### **ุงูุฅุดุนุงุฑุงุช:**
- โ ุฅุฑุณุงู ุฅุดุนุงุฑ ููุทุฑู ุงูุขุฎุฑ ุนูุฏ ุงูุญุฐู
- โ ุชุณุฌูู ูุนูููุงุช ุงูุญุฐู ููุฃุฑุดูุฉ
- โ ุชุณุฌูู ุณุจุจ ุงูุญุฐู (ุฅุฐุง ุชู ุชูููุฑู)

## ๐ฑ **ุงุณุชุฎุฏุงู Flutter:**

### **ุญุฐู ุทูุจ ุนุงุฏู:**
```dart
Future<void> deleteRequest(String requestId) async {
  try {
    final response = await http.delete(
      Uri.parse('$baseUrl/api/special-requests/$requestId'),
      headers: {
        'Authorization': 'Bearer $token',
        'Content-Type': 'application/json',
      },
    );
    
    if (response.statusCode == 200) {
      // ุชู ุงูุญุฐู ุจูุฌุงุญ
      showSuccessMessage('ุชู ุญุฐู ุงูุทูุจ ุจูุฌุงุญ');
    }
  } catch (e) {
    // ูุนุงูุฌุฉ ุงูุฎุทุฃ
    showErrorMessage('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญุฐู ุงูุทูุจ');
  }
}
```

### **ุญุฐู ูุน ุณุจุจ:**
```dart
Future<void> deleteRequestWithReason(String requestId, String reason) async {
  try {
    final response = await http.delete(
      Uri.parse('$baseUrl/api/special-requests/$requestId'),
      headers: {
        'Authorization': 'Bearer $token',
        'Content-Type': 'application/json',
      },
      body: jsonEncode({
        'reason': reason,
      }),
    );
    
    if (response.statusCode == 200) {
      // ุชู ุงูุญุฐู ุจูุฌุงุญ
      showSuccessMessage('ุชู ุญุฐู ุงูุทูุจ ุจูุฌุงุญ');
    }
  } catch (e) {
    // ูุนุงูุฌุฉ ุงูุฎุทุฃ
    showErrorMessage('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญุฐู ุงูุทูุจ');
  }
}
```

### **ุญุฐู ุฅุฌุจุงุฑู (ูุตุงุญุจ ุงูุทูุจ ููุท):**
```dart
Future<void> forceDeleteRequest(String requestId) async {
  try {
    final response = await http.delete(
      Uri.parse('$baseUrl/api/special-requests/$requestId'),
      headers: {
        'Authorization': 'Bearer $token',
        'Content-Type': 'application/json',
      },
      body: jsonEncode({
        'forceDelete': true,
        'reason': 'ุญุฐู ุฅุฌุจุงุฑู ูู ูุจู ุตุงุญุจ ุงูุทูุจ',
      }),
    );
    
    if (response.statusCode == 200) {
      // ุชู ุงูุญุฐู ุจูุฌุงุญ
      showSuccessMessage('ุชู ุญุฐู ุงูุทูุจ ุจูุฌุงุญ');
    }
  } catch (e) {
    // ูุนุงูุฌุฉ ุงูุฎุทุฃ
    showErrorMessage('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญุฐู ุงูุทูุจ');
  }
}
```

## ๐จ **ูุงุฌูุฉ ุงููุณุชุฎุฏู:**

### **ูุงุฆูุฉ ุงูุทูุจุงุช ูุน ุฎูุงุฑ ุงูุญุฐู:**
- ุนุฑุถ ุฒุฑ ุงูุญุฐู ููุทูุจุงุช ุงููุฑููุถุฉ ุฃู ุงูููุบุงุฉ
- ุชุฃููุฏ ุงูุญุฐู ูุจู ุงูุชูููุฐ
- ุฅููุงููุฉ ุฅุฏุฎุงู ุณุจุจ ุงูุญุฐู
- ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ ุฃู ุฎุทุฃ

### **ุญุงูุงุช ุงูุญุฐู:**
- **ุตุงุญุจ ุงูุทูุจ:** ููููู ุญุฐู ุงูุทูุจุงุช ุงููุฑููุถุฉ/ุงูููุบุงุฉ + ุงูุญุฐู ุงูุฅุฌุจุงุฑู
- **ุงูููุงู:** ููููู ุญุฐู ุงูุทูุจุงุช ุงููุฑููุถุฉ/ุงูููุบุงุฉ ููุท
- **ุฅุดุนุงุฑ ููุทุฑู ุงูุขุฎุฑ:** ุนูุฏ ุงูุญุฐู

## ๐ **ุงูุญุงูุฉ:**
โ **ุชู ุชุทููุฑ ุงููุธููุฉ ุจูุฌุงุญ**
โ **validation ุดุงูู ููุญุณู**
โ **Swagger documentation ูุญุฏุซ**
โ **ุฏุนู Flutter ูุงูู**
โ **ุฃูุงู ุนุงูู**
โ **ุฅุดุนุงุฑุงุช ูุชูุงููุฉ** 