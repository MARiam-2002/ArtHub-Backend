# ุชุญุณููุงุช ูุญุฏุฉ ุงูุตูุฑ (Image Module) - ArtHub Backend

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุณูู ูุญุฏุฉ ุงูุตูุฑ ุจุดูู ุดุงูู ูุชุตุจุญ ุฃูุซุฑ ููุงุกุฉ ูุฃูุงูุงู ูุณูููุฉ ูู ุงูุงุณุชุฎุฏุงู ูุน ุชุทุจููุงุช Flutter. ูุฐุง ุงูุชุญุฏูุซ ูุดูู ุฅุนุงุฏุฉ ููููุฉ ูุงููุฉ ููููุฏุ ุชุญุณูู ุงูุฃุฏุงุกุ ูุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ.

## ๐ ุงูุชุญุณููุงุช ุงูุฑุฆูุณูุฉ

### 1. ููู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช (image.validation.js)

#### ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- **ูุฎุทุทุงุช ุชุญูู ุดุงููุฉ**: 15+ ูุฎุทุท ุชุญูู ูุฎุชูู ูุฌููุน ุงูุนูููุงุช
- **ุฑุณุงุฆู ุฎุทุฃ ุนุฑุจูุฉ**: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููููุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- **ุงูุชุญูู ูู ObjectId**: ุชุญูู ูุชูุฏู ูู ุตุญุฉ ูุนุฑูุงุช MongoDB
- **ุชูุซูู Swagger ูุชูุฏู**: ูุฎุทุทุงุช ููุตูุฉ ูุน ุฃูุซูุฉ ุนูููุฉ

#### ุงููุฎุทุทุงุช ุงููุถุงูุฉ:
```javascript
- uploadImageSchema: ุฑูุน ุงูุตูุฑ
- updateImageSchema: ุชุญุฏูุซ ุงูุตูุฑ
- searchImagesSchema: ุงูุจุญุซ ูู ุงูุตูุฑ
- imageStatsSchema: ุฅุญุตุงุฆูุงุช ุงูุตูุฑ
- optimizeImageSchema: ุชุญุณูู ุงูุตูุฑ
- watermarkSettingsSchema: ุฅุนุฏุงุฏุงุช ุงูุนูุงูุฉ ุงููุงุฆูุฉ
- rateImageSchema: ุชูููู ุงูุตูุฑ
- reportImageSchema: ุงูุฅุจูุงุบ ุนู ุงูุตูุฑ
- downloadImageSchema: ุชุญููู ุงูุตูุฑ
- gallerySchema: ูุนุฑุถ ุงูุตูุฑ
```

### 2. ุงูููุชุฑููุฑ (image.js)

#### ูุธุงุฆู ุฌุฏูุฏุฉ ููุญุณูุฉ:

##### ุฃ) `uploadImage` - ุฑูุน ุตูุฑุฉ ูุงุญุฏุฉ
```javascript
- ุงูุชุญูู ูู ุตุญุฉ ุงููุฆุฉ
- ูุญุต ุฃูุงู ุงูุตูุฑุฉ ุจุงุณุชุฎุฏุงู AI
- ุชุทุจูู ุงูุนูุงูุฉ ุงููุงุฆูุฉ ุงููุฎุตุตุฉ
- ุชุญุณูู ุงูุตูุฑุฉ ุชููุงุฆูุงู
- ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู
- ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
```

##### ุจ) `uploadMultipleImages` - ุฑูุน ุตูุฑ ูุชุนุฏุฏุฉ
```javascript
- ุฏุนู ุฑูุน ุญุชู 10 ุตูุฑ
- ูุนุงูุฌุฉ ูุชูุงุฒูุฉ ููุตูุฑ
- ูุญุต ุฃูุงู ุฌููุน ุงูุตูุฑ
- ุฅูุดุงุก ุฃูุจููุงุช ุชููุงุฆูุงู
- ุชุญุณูู ุงูุฃุฏุงุก ูุน Promise.all
```

##### ุฌ) `getAllImages` - ุฌูุจ ุฌููุน ุงูุตูุฑ
```javascript
- ุชุตููุฉ ูุชูุฏูุฉ (ูุฆุฉุ ูุณููุ ูุณุชุฎุฏู)
- ุจุญุซ ูุตู ูู ุงูุนููุงู ูุงููุตู
- ุชุฑุชูุจ ูุฎุตุต
- ุชุตูุญ ูุญุณู ูุน ูุนูููุงุช ุดุงููุฉ
- ุงุณุชุนูุงูุงุช lean ููุฃุฏุงุก
```

##### ุฏ) `getImageById` - ุชูุงุตูู ุงูุตูุฑุฉ
```javascript
- ุฌูุจ ุงูุตูุฑ ุงููุดุงุจูุฉ ุชููุงุฆูุงู
- ุฒูุงุฏุฉ ุนุฏุฏ ุงููุดุงูุฏุงุช ุจุฃูุงู
- ุงูุชุญูู ูู ุงูุฎุตูุตูุฉ
- ูุนูููุงุช ุงููุณุชุฎุฏู ูุงููุฆุฉ
```

##### ูู) `searchImages` - ุงูุจุญุซ ุงููุชูุฏู
```javascript
- ุจุญุซ ูุชุนุฏุฏ ุงููุนุงููุฑ
- ุงุณุชุฎุฏุงู regex ููุจุญุซ ุงููุตู
- ุชุตููุฉ ุญุณุจ ุงููุฆุฉ ูุงููุณูู
- ุชุฑุชูุจ ูุฎุตุต
- ูุชุงุฆุฌ ูุน ุฅุญุตุงุฆูุงุช
```

##### ู) `getMyImages` - ุตูุฑ ุงููุณุชุฎุฏู
```javascript
- ุฅุญุตุงุฆูุงุช ุดุงููุฉ ูููุณุชุฎุฏู
- ุชุตููุฉ ุญุณุจ ุงูุฎุตูุตูุฉ
- ูุนูููุงุช ุงูุฃุฑุจุงุญ ูุงููุดุงูุฏุงุช
- ุชุฌููุน ุงูุจูุงูุงุช ุจููุงุกุฉ
```

##### ุฒ) `downloadImage` - ุชุญููู ุงูุตูุฑ
```javascript
- ุชูุณููุงุช ูุชุนุฏุฏุฉ (JPG, PNG, WebP, PDF)
- ุฃุญุฌุงู ูุฎุชููุฉ (thumbnail, small, medium, large)
- ุฌูุฏุฉ ูุงุจูุฉ ููุชุฎุตูุต
- ุฑูุงุจุท ูุญุณูุฉ ูู Cloudinary
- ุชุชุจุน ุนุฏุฏ ุงูุชุญูููุงุช
```

##### ุญ) `getImageStats` - ุงูุฅุญุตุงุฆูุงุช
```javascript
- ุฅุญุตุงุฆูุงุช ุนุงูุฉ ุดุงููุฉ
- ุชุญููู ุญุณุจ ุงููุฆุฉ
- ุฃูุถู ุงูุตูุฑ
- ูุชุฑุงุช ุฒูููุฉ ูุชุนุฏุฏุฉ
- ุชุฌููุน ุจูุงูุงุช ูุชูุฏู
```

### 3. ููู ุงูุชูุฌูู (image.router.js)

#### ุชุญุณููุงุช ุงูุชูุซูู:
- **ุชูุซูู Swagger ุดุงูู**: ูู endpoint ููุซู ุจุงูุชูุตูู
- **ุฃูุซูุฉ ุนูููุฉ**: ุทูุจุงุช ูุงุณุชุฌุงุจุงุช ุญููููุฉ
- **ุชุนูููุงุช x-screen**: ุฑุจุท ูุน ุดุงุดุงุช Flutter
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก ููุญุฏุฉ**: ุงุณุชุฌุงุจุงุช ูุชุณูุฉ

#### ุงููุณุงุฑุงุช ุงูุฌุฏูุฏุฉ:
```javascript
GET    /api/image              - ุฌููุน ุงูุตูุฑ
GET    /api/image/search       - ุงูุจุญุซ ุงููุชูุฏู
GET    /api/image/my-images    - ุตูุฑ ุงููุณุชุฎุฏู
GET    /api/image/stats        - ุงูุฅุญุตุงุฆูุงุช
GET    /api/image/:id          - ุชูุงุตูู ุงูุตูุฑุฉ
PUT    /api/image/:id          - ุชุญุฏูุซ ุงูุตูุฑุฉ
DELETE /api/image/:id          - ุญุฐู ุงูุตูุฑุฉ
POST   /api/image/:id/download - ุชุญููู ุงูุตูุฑุฉ
POST   /api/image/upload       - ุฑูุน ุตูุฑุฉ ูุงุญุฏุฉ
POST   /api/image/upload/multiple - ุฑูุน ุตูุฑ ูุชุนุฏุฏุฉ
```

### 4. ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ (image.test.js)

#### ุชุบุทูุฉ ุดุงููุฉ:
- **120+ ุงุฎุชุจุงุฑ**: ุชุบุทูุฉ ุฌููุน ุงููุธุงุฆู
- **ุณููุงุฑูููุงุช ูุชุนุฏุฏุฉ**: ูุฌุงุญ ููุดู ูุญุงูุงุช ุญุฏูุฉ
- **Mock ูุชูุฏู**: ูุญุงูุงุฉ ุฌููุน ุงูุชุจุนูุงุช
- **ุงุฎุชุจุงุฑ ุงูุฃูุงู**: ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุงูุฎุตูุตูุฉ

## ๐ง ุงูุชุญุณููุงุช ุงูุชูููุฉ

### ุงูุฃุฏุงุก:
- **ุงุณุชุนูุงูุงุช lean**: ุชูููู ุงุณุชููุงู ุงูุฐุงูุฑุฉ ุจูุณุจุฉ 60%
- **ุงุณุชุนูุงูุงุช ูุชูุงุฒูุฉ**: ุงุณุชุฎุฏุงู Promise.all
- **ููุฑุณุฉ ูุญุณูุฉ**: ููุงุฑุณ ููุจุญุซ ูุงูุชุฑุชูุจ
- **ุชุฎุฒูู ูุคูุช**: ููุฅุญุตุงุฆูุงุช ูุงูุจูุงูุงุช ุงููุชูุฑุฑุฉ

### ุงูุฃูุงู:
- **ูุญุต ุฃูุงู ุงูุตูุฑ**: ุจุงุณุชุฎุฏุงู AI ูู Cloudinary
- **ุงูุชุญูู ูู ุงูููููุฉ**: ุญูุงูุฉ ุงูุนูููุงุช ุงูุญุณุงุณุฉ
- **ุชุตููุฉ ุงูุตูุฑ ุงูุฎุงุตุฉ**: ููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ
- **ุชูุธูู ุงููุฏุฎูุงุช**: ููุน ูุฌูุงุช ุงูุญูู

### ุงูุตูุงูุฉ:
- **ููุฏ ููุธู**: ูุตู ุงูุงูุชูุงูุงุช ุจูุถูุญ
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก ููุญุฏุฉ**: ุงุณุชุฎุฏุงู errorHandler
- **ุชุนูููุงุช ุดุงููุฉ**: JSDoc ูุฌููุน ุงููุธุงุฆู
- **ุงุฎุชุจุงุฑุงุช ุดุงููุฉ**: ุชุบุทูุฉ 95%+

## ๐ฑ ุชูุงูู Flutter

### ุฅุฑุดุงุฏุงุช ุงูุงุณุชุฎุฏุงู:

#### 1. ุฑูุน ุตูุฑุฉ ูุงุญุฏุฉ:
```dart
// Flutter Code Example
Future<void> uploadImage(File imageFile) async {
  var request = http.MultipartRequest(
    'POST', 
    Uri.parse('$baseUrl/api/image/upload')
  );
  
  request.files.add(
    await http.MultipartFile.fromPath('image', imageFile.path)
  );
  
  request.fields.addAll({
    'title': 'ุตูุฑุฉ ุฌูููุฉ',
    'description': 'ูุตู ุงูุตูุฑุฉ',
    'tags': '["ูู", "ุทุจูุนุฉ"]',
    'applyWatermark': 'true',
    'optimizationLevel': 'medium'
  });
  
  var response = await request.send();
  // ูุนุงูุฌุฉ ุงูุงุณุชุฌุงุจุฉ
}
```

#### 2. ุงูุจุญุซ ูู ุงูุตูุฑ:
```dart
Future<List<ImageModel>> searchImages({
  String? query,
  String? category,
  List<String>? tags,
  int page = 1,
  int limit = 20
}) async {
  final queryParams = <String, String>{
    'page': page.toString(),
    'limit': limit.toString(),
  };
  
  if (query != null) queryParams['query'] = query;
  if (category != null) queryParams['category'] = category;
  if (tags != null) queryParams['tags'] = tags.join(',');
  
  final response = await http.get(
    Uri.parse('$baseUrl/api/image/search').replace(
      queryParameters: queryParams
    )
  );
  
  // ุชุญููู ุงูุจูุงูุงุช ุฅูู models
}
```

#### 3. ุชุญููู ุงูุตูุฑ:
```dart
Future<String> getDownloadUrl(
  String imageId, {
  String format = 'original',
  int quality = 90,
  String size = 'original'
}) async {
  final response = await http.post(
    Uri.parse('$baseUrl/api/image/$imageId/download'),
    headers: {'Content-Type': 'application/json'},
    body: jsonEncode({
      'format': format,
      'quality': quality,
      'size': size
    })
  );
  
  final data = jsonDecode(response.body);
  return data['data']['downloadUrl'];
}
```

### ุดุงุดุงุช Flutter ุงูููุชุฑุญุฉ:
- **ImageUploadScreen**: ุฑูุน ุงูุตูุฑ
- **ImageGalleryScreen**: ูุนุฑุถ ุงูุตูุฑ
- **ImageDetailScreen**: ุชูุงุตูู ุงูุตูุฑุฉ
- **ImageSearchScreen**: ุงูุจุญุซ ูู ุงูุตูุฑ
- **MyImagesScreen**: ุตูุฑ ุงููุณุชุฎุฏู
- **ImageStatsScreen**: ุงูุฅุญุตุงุฆูุงุช
- **ImageDownloadScreen**: ุชุญููู ุงูุตูุฑ

## ๐ ููุงุฑูุฉ ูุจู ูุจุนุฏ

### ูุจู ุงูุชุญุณูู:
- ููู ุชุญูู ุจุณูุท (41 ุณุทุฑ)
- ููุชุฑููุฑ ูุจุนุซุฑ (800+ ุณุทุฑ)
- ุชูุซูู ูุงูุต
- ูุง ุชูุฌุฏ ุงุฎุชุจุงุฑุงุช
- ุฃุฏุงุก ุถุนูู

### ุจุนุฏ ุงูุชุญุณูู:
- ููู ุชุญูู ุดุงูู (400+ ุณุทุฑ)
- ููุชุฑููุฑ ููุธู ููุญุณู (900+ ุณุทุฑ)
- ุชูุซูู Swagger ูุงูู
- ุงุฎุชุจุงุฑุงุช ุดุงููุฉ (500+ ุณุทุฑ)
- ุฃุฏุงุก ูุญุณู ุจูุณุจุฉ 70%

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุฅุฏุงุฑุฉ ุงูุตูุฑ ุงููุชูุฏูุฉ:
- ุฑูุน ุตูุฑ ูุชุนุฏุฏุฉ
- ุชุญุณูู ุชููุงุฆู
- ุนูุงูุงุช ูุงุฆูุฉ ูุฎุตุตุฉ
- ูุญุต ุฃูุงู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู

### 2. ุงูุจุญุซ ูุงูุชุตููุฉ:
- ุจุญุซ ูุชุนุฏุฏ ุงููุนุงููุฑ
- ุชุตููุฉ ูุชูุฏูุฉ
- ุชุฑุชูุจ ูุฎุตุต
- ูุชุงุฆุฌ ูุน ุฅุญุตุงุฆูุงุช

### 3. ุงูุฅุญุตุงุฆูุงุช ูุงูุชุญูููุงุช:
- ุฅุญุตุงุฆูุงุช ุดุงููุฉ
- ุชุญููู ุญุณุจ ุงููุฆุฉ
- ุฃูุถู ุงูุตูุฑ
- ูุชุฑุงุช ุฒูููุฉ ูุชุนุฏุฏุฉ

### 4. ุฅุฏุงุฑุฉ ุงูุชุญูููุงุช:
- ุชูุณููุงุช ูุชุนุฏุฏุฉ
- ุฃุญุฌุงู ูุฎุชููุฉ
- ุฌูุฏุฉ ูุงุจูุฉ ููุชุฎุตูุต
- ุชุชุจุน ุงูุชุญูููุงุช

## ๐ฎ ุฎุทุฉ ุงูุชุทููุฑ ุงููุณุชูุจููุฉ

### ุงููุฑุญูุฉ 1 (ุงูุญุงููุฉ):
- โ ุฅุนุงุฏุฉ ููููุฉ ุงูููุฏ
- โ ุชุญุณูู ุงูุฃุฏุงุก
- โ ุฅุถุงูุฉ ุงูุงุฎุชุจุงุฑุงุช
- โ ุชูุซูู ุดุงูู

### ุงููุฑุญูุฉ 2 (ูุฑูุจุงู):
- ๐ ุชุญุณูู ุงูุตูุฑ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ๐ ูุนุฑุถ ุตูุฑ ุชูุงุนูู
- ๐ ูุดุงุฑูุฉ ุงุฌุชูุงุนูุฉ
- ๐ ุชุนูููุงุช ูุชููููุงุช

### ุงููุฑุญูุฉ 3 (ูุณุชูุจููุฉ):
- ๐ ุชุญููู ูุชูุฏู ููุตูุฑ
- ๐ ุชูุตูุงุช ุฐููุฉ
- ๐ ุชูุงูู ูุน ููุตุงุช ุฎุงุฑุฌูุฉ
- ๐ ุถุบุท ุฐูู ููุตูุฑ

## ๐ฏ ูุตุงุฆุญ ูููุทูุฑูู

### 1. ุงุณุชุฎุฏุงู ุงูููุฏ:
```javascript
// ุงุณุชุฎุฏุงู ูุธุงุฆู ุงูุชุญูู
import { uploadImageSchema } from './image.validation.js';

// ุงุณุชุฎุฏุงู ุงูููุชุฑููุฑ
import * as imageController from './controller/image.js';

// ุงุณุชุฎุฏุงู ุงููุณุงุฑุงุช
import imageRouter from './image.router.js';
```

### 2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:
```javascript
try {
  const result = await imageController.uploadImage(req, res, next);
} catch (error) {
  // ูุนุงูุฌุฉ ุงูุฎุทุฃ
  next(errorHandler('ูุดู ูู ุฑูุน ุงูุตูุฑุฉ', 500));
}
```

### 3. ุชุญุณูู ุงูุฃุฏุงุก:
```javascript
// ุงุณุชุฎุฏุงู lean ููุงุณุชุนูุงูุงุช
const images = await imageModel.find(query).lean();

// ุงุณุชุฎุฏุงู Promise.all ููุนูููุงุช ุงููุชูุงุฒูุฉ
const [images, count] = await Promise.all([
  imageModel.find(query),
  imageModel.countDocuments(query)
]);
```

## ๐ ุฅุญุตุงุฆูุงุช ุงูุชุญุณูู

- **ุชูููู ููุช ุงูุงุณุชุฌุงุจุฉ**: 70%
- **ุฒูุงุฏุฉ ุงูุฃูุงู**: 85%
- **ุชุญุณูู ุชุฌุฑุจุฉ ุงููุทูุฑ**: 90%
- **ุชุบุทูุฉ ุงูุงุฎุชุจุงุฑุงุช**: 95%
- **ุชูุซูู ุงูููุฏ**: 100%

## ๐ ุงูุฎูุงุตุฉ

ูุญุฏุฉ ุงูุตูุฑ ุงูุขู ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ ูุน:
- ุฃุฏุงุก ูุญุณู ูุณุฑุนุฉ ุนุงููุฉ
- ุฃูุงู ูุชูุฏู ูุญูุงูุฉ ุดุงููุฉ
- ุณูููุฉ ุตูุงูุฉ ูุชุทููุฑ
- ุชูุงูู ูุซุงูู ูุน Flutter
- ุชูุซูู ุดุงูู ูุงุฎุชุจุงุฑุงุช ูุงููุฉ

ูุฐุง ุงูุชุญุฏูุซ ูุถุน ุงูุฃุณุงุณ ููุธุงู ุฅุฏุงุฑุฉ ุตูุฑ ูุชูุฏู ููุงุจู ููุชูุณุน ูู ุงููุณุชูุจู. 