# دليل توثيق Swagger للـ Admin والـ Dashboard

## نظرة عامة

تم تحديث توثيق Swagger ليشمل جميع نقاط النهاية الجديدة للـ Admin والـ Dashboard. هذا الدليل يوضح كيفية الوصول إلى التوثيق المحدث والاستفادة منه.

## الملفات المحدثة

### 1. ملفات Swagger الرئيسية

#### `src/swagger/dashboard-swagger.js`
- تم تحديثه ليشمل جميع نقاط النهاية الجديدة للداشبورد
- يتضمن نقاط النهاية التالية:
  - `/api/v1/dashboard/overview` - نظرة عامة على النظام
  - `/api/v1/dashboard/statistics` - الإحصائيات الرئيسية
  - `/api/v1/dashboard/revenue` - إحصائيات الإيرادات
  - `/api/v1/dashboard/orders/statistics` - إحصائيات الطلبات
  - `/api/v1/dashboard/charts` - بيانات الرسوم البيانية
  - `/api/v1/dashboard/artists/performance` - أداء الفنانين
  - `/api/v1/dashboard/users` - قائمة المستخدمين
  - `/api/v1/dashboard/users/{id}` - تفاصيل المستخدم
  - `/api/v1/dashboard/users/{id}/status` - تحديث حالة المستخدم
  - `/api/v1/dashboard/orders` - قائمة الطلبات
  - `/api/v1/dashboard/orders/{id}` - تفاصيل الطلب
  - `/api/v1/dashboard/reviews` - قائمة التقييمات
  - `/api/v1/dashboard/reviews/{id}/status` - تحديث حالة التقييم
  - `/api/v1/dashboard/notifications` - إرسال إشعار
  - `/api/v1/dashboard/artists/top` - الفنانين الأفضل
  - `/api/v1/dashboard/activities` - النشاطات الأخيرة

#### `src/swagger/admin-swagger.js` (جديد)
- ملف جديد لتوثيق نقاط النهاية الخاصة بإدارة المشرفين
- يتضمن نقاط النهاية التالية:
  - `/api/v1/admin/login` - تسجيل دخول المشرف
  - `/api/v1/admin/profile` - الملف الشخصي للمشرف
  - `/api/v1/admin/change-password` - تغيير كلمة المرور
  - `/api/v1/admin/admins` - قائمة المشرفين
  - `/api/v1/admin/admins/{id}` - تفاصيل المشرف
  - `/api/v1/admin/admins/{id}/change-password` - تغيير كلمة مرور المشرف

#### `src/swagger/swagger.js`
- تم تحديثه لإضافة مسارات Admin إلى التوثيق
- الآن يدعم كلاً من Dashboard و Admin paths

#### `src/swagger/swagger-definition.js`
- تم إضافة تعريف Admin tag
- تم تحديث x-tagGroups لتشمل Admin

## كيفية الوصول إلى التوثيق

### 1. عبر المتصفح
```
http://localhost:5000/api-docs
```

### 2. عبر Swagger UI
```
http://localhost:5000/swagger
```

## التصنيفات الجديدة

### Admin Tag
- **الاسم**: Admin
- **الوصف**: واجهات API لإدارة المشرفين
- **النقاط النهائية**: 8 نقاط نهائية

### Dashboard Tag (محدث)
- **الاسم**: Dashboard
- **الوصف**: واجهات API للوحة التحكم الإدارية
- **النقاط النهائية**: 16 نقطة نهائية

## الميزات الجديدة في التوثيق

### 1. أمثلة مفصلة
- كل نقطة نهائية تحتوي على أمثلة للبيانات المرسلة والمستلمة
- أمثلة باللغة العربية لسهولة الفهم

### 2. رسائل الخطأ
- توثيق شامل لجميع حالات الخطأ المحتملة
- رسائل خطأ واضحة ومفيدة

### 3. المعاملات (Parameters)
- توثيق مفصل لجميع المعاملات المطلوبة والاختيارية
- قيود على القيم (validation rules)

### 4. الاستجابات (Responses)
- توثيق مفصل لجميع الاستجابات المحتملة
- أمثلة للبيانات المستلمة

## كيفية استخدام التوثيق

### 1. استكشاف النقاط النهائية
1. افتح التوثيق في المتصفح
2. ابحث عن التصنيف المطلوب (Admin أو Dashboard)
3. اختر النقطة النهائية المطلوبة
4. اقرأ الوصف والمعاملات المطلوبة

### 2. اختبار النقاط النهائية
1. انقر على "Try it out"
2. أدخل البيانات المطلوبة
3. انقر على "Execute"
4. راجع الاستجابة

### 3. نسخ الكود
1. اختر اللغة المطلوبة (JavaScript, cURL, etc.)
2. انسخ الكود المولد
3. استخدمه في تطبيقك

## أمثلة على الاستخدام

### تسجيل دخول المشرف
```javascript
const response = await fetch('/api/v1/admin/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    email: 'admin@arthub.com',
    password: 'Admin123!'
  })
});
```

### جلب إحصائيات الداشبورد
```javascript
const response = await fetch('/api/v1/dashboard/statistics', {
  method: 'GET',
  headers: {
    'Authorization': 'Bearer YOUR_TOKEN_HERE'
  }
});
```

## الأمان والصلاحيات

### Admin Endpoints
- تتطلب مصادقة Bearer Token
- بعض النقاط النهائية تتطلب صلاحيات superadmin
- التحقق من الدور والحالة

### Dashboard Endpoints
- تتطلب مصادقة Bearer Token
- تتطلب صلاحيات إدارية
- التحقق من الصلاحيات قبل الوصول

## التحديثات المستقبلية

### 1. إضافة نقاط نهائية جديدة
- إضافة نقاط نهائية للتقارير المفصلة
- إضافة نقاط نهائية للإعدادات
- إضافة نقاط نهائية للنسخ الاحتياطي

### 2. تحسين التوثيق
- إضافة المزيد من الأمثلة
- تحسين الرسوم التوضيحية
- إضافة دليل الاستخدام التفاعلي

### 3. إضافة اختبارات
- اختبارات تلقائية للنقاط النهائية
- اختبارات الأداء
- اختبارات الأمان

## استكشاف الأخطاء

### مشاكل شائعة

#### 1. خطأ 401 (Unauthorized)
- تأكد من إرسال Bearer Token صحيح
- تأكد من أن الحساب نشط

#### 2. خطأ 403 (Forbidden)
- تأكد من أن لديك الصلاحيات المطلوبة
- تأكد من دور المستخدم

#### 3. خطأ 400 (Bad Request)
- تأكد من صحة البيانات المرسلة
- راجع المعاملات المطلوبة

### كيفية الإبلاغ عن مشاكل
1. تحقق من التوثيق أولاً
2. اختبر النقطة النهائية في Swagger UI
3. راجع رسائل الخطأ بعناية
4. أبلغ عن المشكلة مع تفاصيل كاملة

## الخلاصة

تم تحديث توثيق Swagger بنجاح ليشمل جميع نقاط النهاية الجديدة للـ Admin والـ Dashboard. التوثيق الآن شامل ومفصل ويوفر:

- ✅ جميع النقاط النهائية الجديدة
- ✅ أمثلة مفصلة باللغة العربية
- ✅ رسائل خطأ واضحة
- ✅ معاملات موثقة بالكامل
- ✅ استجابات مفصلة
- ✅ تصنيفات منظمة
- ✅ واجهة سهلة الاستخدام

يمكن الآن للمطورين استخدام التوثيق المحدث لاختبار وتطوير تطبيقاتهم بسهولة وفعالية. 