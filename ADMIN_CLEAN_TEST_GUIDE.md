# دليل اختبار نقاط النهاية المحدثة للادمن

## نظرة عامة

تم تنظيف نقاط النهاية للادمن وإزالة النقاط غير المهمة. الآن لدينا 9 نقاط نهائية أساسية فقط.

## نقاط النهاية المتبقية

### 1. تسجيل دخول الأدمن
```bash
POST /api/admin/login
```

### 2. إدارة الأدمن (للسوبر أدمن)
- `GET /api/admin/admins` - جلب قائمة الأدمن
- `POST /api/admin/admins` - إنشاء أدمن جديد
- `PUT /api/admin/admins/:id` - تحديث بيانات الأدمن
- `DELETE /api/admin/admins/:id` - حذف الأدمن
- `PUT /api/admin/admins/:id/change-password` - تغيير كلمة مرور الأدمن

### 3. إدارة الملف الشخصي (لجميع الأدمن)
- `GET /api/admin/profile` - جلب الملف الشخصي
- `PUT /api/admin/profile` - تحديث الملف الشخصي
- `PUT /api/admin/change-password` - تغيير كلمة المرور الشخصية

## اختبار سريع

### الخطوة 1: تسجيل دخول
```bash
curl -X POST http://localhost:3000/api/admin/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@example.com",
    "password": "Password123!"
  }'
```

### الخطوة 2: اختبار جلب الملف الشخصي
```bash
curl -X GET http://localhost:3000/api/admin/profile \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

### الخطوة 3: اختبار جلب قائمة الأدمن (للسوبر أدمن)
```bash
curl -X GET http://localhost:3000/api/admin/admins \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

## استخدام Postman

1. استورد ملف `docs/api/Admin_Clean_Postman_Collection.json`
2. ابدأ بـ "1. تسجيل دخول الأدمن"
3. سيتم حفظ التوكن تلقائياً
4. اختبر باقي النقاط النهائية

## النقاط المحذوفة

- `GET /api/admin/users` - تم حذفها لأنها غير مطلوبة للوحة تحكم الأدمن الأساسية

## ملاحظات مهمة

1. **الصلاحيات:** معظم النقاط تتطلب صلاحيات محددة
2. **التحقق من الصحة:** جميع النقاط تحتوي على تحقق من صحة البيانات
3. **الأمان:** جميع النقاط محمية بواسطة middleware المصادقة
4. **التوثيق:** جميع النقاط موثقة في Swagger

## استكشاف الأخطاء

### خطأ 401 (غير مصرح)
- تأكد من صحة التوكن
- تأكد من صلاحيات المستخدم

### خطأ 403 (ممنوع)
- تأكد من أن المستخدم لديه الصلاحيات المطلوبة
- السوبر أدمن فقط يمكنه إدارة الأدمن الآخرين

### خطأ 404 (غير موجود)
- تأكد من صحة معرف الأدمن
- تأكد من وجود الأدمن في قاعدة البيانات

## الخطوات التالية

1. اختبر جميع النقاط النهائية
2. تأكد من عمل النظام بشكل صحيح
3. راجع التوثيق المحدث
4. ابدأ في تطوير الواجهة الأمامية 